\documentclass[twoside]{scrartcl}
\usepackage[
headfootpackage=fancyhdr,
hijackboth=true,
dilinputfiles=true,
inputfilesrule=false,
]{draftinputlines}
\usepackage{listings}
\lstloadlanguages{[LaTeX]TeX} 
\lstset{% 
    basicstyle=\ttfamily, 
    commentstyle=\itshape\ttfamily\small, 
    showspaces=false, 
    showstringspaces=false, 
    breaklines=true, 
    breakautoindent=true, 
    captionpos=t,
    frame=single,
    escapeinside={(*}{*)},
} 
\lstMakeShortInline{|}
\usepackage{enumitem}
\setdescription{font=\ttfamily,leftmargin=4em}
% \xdef\thefilename{\currfilename}
% \chead{\texttt{\thefilename}\xdef\thefilename{\currfilename}}
% \cfoot{\texttt{\currfilename}}

\newcommand\doadef[2]{%
  \expandafter\def\csname #1\endcsname{\csname
    #2\endcsname{Foo}}
}
\begin{document}
\section{Introduction}


This package adds the input lines of various parts of your LaTeX
document as marginpars.
It can also add the first and last input lines read to the header and
footer respectively.

The marginpars float, and I can't guarantee they'll be entirely
accurate if lots are bunched together.
Also, the begin and end page numbers might not be totally accurate.
But they're still useful (I hope).

The numbers that float with tables and the like do not float, so they
will overlap other numbers in some circumstances.
This should be rare since floats should have their own space.

\section{Examples}
\input{inputfile}

\section{Options}
Here are the options that are currently defined and a description of
what they do.

\paragraph{\lstinline+headfootpackage+}
This sets what package is used to do the headers and footers.
Set it to whatever is setting the headers and footers in your
document.
The options are:
\begin{description}[labelindent=1cm]
\item[scrpage] Uses KOMA script's |scrpage2|
\item[fancyhdr] Uses |fancyhdr|
\item[memoir] Uses |memoir|. Awkwardly, given the way |memoir|'s
  header and footer mechanisms work, this will overwrite any current
  headers you have set.
  So this just sets a page number somewhere where it isn't setting an
  input line number.
  If you want to add the input line number to your existing headers
  instead, you can do that with these two macros: 
  \textsc{These macros don't exist yet. 
    When I make memoir work, I will fix this.}
  \item[plain] Use the plain TeX macros.
\end{description}

\paragraph{\lstinline+inputlineshead,inputlinesfoot,filenamehead,filenamefoot+}

These options print the line number and file name at the start of the
page at the top and the end of the page at the bottom. 
The options available are the same for both, though they can be set separately. 
They are:
\begin{description}[labelindent=1cm]
\item[inside] Print number on the inside (same as |left| for onesided
  documents)
\item[outside] Print number on the outside (same as |right| for
  onesided documents)
\item[center] Print number on in the center
\item[left] Print number on the left
\item[right] Print number on the right
\item[off] Don't print the numbers
\end{description}

They aren't necessarily 100\% accurate given the asynchronous way that
the page builder works, but they are probably good enough for most purposes.

\paragraph{\lstinline+dilfont+}

This defines what font the input line numbers will appear in.
The default is |\ttfamily\small|.

\paragraph{\lstinline+environmentline+}

This option takes a list of environment names.
Those environments listed will then print the line number where they
start.
This is only necessary in |safemode| (see below).

\paragraph{Switches}

The following is a list of Boolean (true/false) options and what they
control.
\begin{description}
\item[sectionline] Determines whether each section will print the line
  it is printed on.
\item[dilinputfiles] Prints the name and input line number of files
  included with |\input| and |\include|.
\item[dilinputfilesrule] Prints rules above the start and below the
  end of an included file, so it's obvious where in the page it starts
  and ends.
  If |dilinputfiles| is false, this doesn't do anything.
\item[graphicsfilename] Prints the name of files added with
  |\includegraphics| in the opposite margin to the page numbers.
  Load |graphicx| \emph{before} |draftinputlines| for this to work.
\item[safemode] The way this package works is to hook into the
  paragraph mechanism with the |everyhook| package.
  This isn't always a good idea since paragraphs are used for all
  sorts of random stuff.
  So if the package breaks, try safe mode. 
  Fewer line numbers, but it should be more robust.
\item[hijackheaders,hijackfooters,hijackboth] These are just a quick
  way to set the headers and footers to output input line information.
\end{description}




\end{document}

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: t
%%% End: 
